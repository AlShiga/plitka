<template>
<transition name="fade">
  <div v-if="show" class="prItem overflow-hidden">
    <div class="row">
      <img :src="project.acf.img" alt="" class="prItem__firstImg">
    </div>
    <div class="blogFirst bg_w p-t-250 p-b-80">
      <div class="row">
        <div class="col-lg-16 col-22 offset-lg-4 offset-1">
          <h1 class="h3">{{project.acf.title}}</h1>
        </div>
      </div>
    </div>
    <div class="bg_w p-b-200">
      <div class="row">
        <div class="col-xl-1 offset-xl-8 col-lg-2 offset-lg-6 col-md-2 offset-md-4 col-22 offset-1">
          <p class="p1">{{new Date(project.date).toLocaleString('ru',{ day: 'numeric', month: 'numeric', year: 'numeric'})}}</p>
        </div>
        <div class="col-xl-7 offset-xl-1 col-lg-8 offset-lg-1 col-md-12 offset-md-1 col-22 offset-1">
          <div class="m-b-40">
          <span class="p1" v-html="($store.state.langEn)?project.acf.textEN: project.acf.text"></span>
          </div>
          <span class="d-block m-b-40">
          <span class="p1 ttu " v-for="tag in project.acf.tags"  :key="tag.name">[&nbsp;{{tag.name}}&nbsp;]&nbsp;&nbsp;</span>
          </span>
          <a class="p1 ttu d-block m-b-40 red" target="_blank" :href="project.acf.siteLink">{{project.acf.site}}</a>
          <a class="p1 ttu d-block m-b-40 red" target="_blank" :href="project.acf.behLink">{{project.acf.beh}}</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="w-100" v-html="project.acf.red"></div>
    </div>
    <div v-if='showMore' class="  p-t-200 p-b-150">
      <div class="row">
        <div  class="col-xl-18 offset-xl-5 col-lg-14 offset-lg-9 col-md-16 offset-md-7 col-22 offset-1">
          <a v-for="bl in projectMore" :key="bl.id" @click="$router.push({ path: `/projects/${bl.id}` })" class="moreBlog p-b-20 m-b-40">
            <span class="h6">{{bl.acf.title}}</span>
            <span class="p1">[&nbsp;{{new Date(bl.date).toLocaleString('ru',{ day: 'numeric', month: 'numeric', year: 'numeric'})}}&nbsp;]</span>
          </a>
          <div class="m-t-150 d-flex justify-content-end ">
            <svg @click="$router.push({ path: `/projects/` })" class="prTo" width="311" height="273" viewBox="0 0 311 273" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M57.8174 232.418C57.8174 232.554 57.8174 232.757 57.8174 232.893C57.953 233.028 58.0887 233.096 58.1565 233.164C58.0208 232.893 57.953 232.621 57.8174 232.418Z" fill="white"/>
              <path d="M181.719 151.504C185.992 151.436 190.196 151.504 194.266 151.775C233.939 154.624 254.691 147.977 286.972 154.963C288.26 156.522 288.057 158.828 288.667 160.727C289.142 187.718 281.953 214.438 283.174 241.565C282.903 244.685 282.971 248.008 282.089 250.992C215.764 252.891 148.896 248.686 82.5025 252.891C65.2091 251.195 47.9835 249.229 30.6222 251.128C28.7233 250.924 26.8245 250.449 24.9934 249.839C25.0612 220.949 23.5692 191.109 23.5014 161.88C23.7727 161.677 23.9761 161.405 24.1118 160.998C24.8578 160.456 25.4003 159.506 25.3325 158.014C26.3497 157.336 27.5026 156.929 28.5877 156.59C30.4866 155.98 32.2498 154.827 34.2166 154.691C52.7307 154.149 71.923 155.03 90.4371 154.488C106.985 152.521 126.652 152.318 143.131 152.86C155.271 153.064 168.834 151.707 181.719 151.504ZM33.6062 149.062C30.1475 149.605 26.9601 151.233 23.7727 152.521C22.1451 153.335 20.7209 154.691 20.0427 156.455C19.0255 157.404 18.8898 159.439 18.4151 160.659C17.9404 190.295 20.1105 220.135 19.568 249.636C19.6358 251.128 20.314 252.62 21.4669 253.637C24.1796 255.739 27.9095 256.146 31.2326 256.485C48.3226 254.451 65.3447 256.689 82.3669 258.248C148.692 254.247 215.289 258.045 281.682 256.756C283.174 256.553 284.598 256.01 285.683 254.993C288.125 252.687 287.989 249.093 288.396 245.973C286.565 215.523 287.04 213.014 290.024 158.625C289.481 152.182 285.683 150.894 278.63 151.029C273.883 151.097 188.365 150.215 188.365 150.215C188.365 150.148 134.993 149.876 33.6062 149.062Z" fill="white"/>
              <path d="M187.417 127.977C195.216 128.045 203.015 128.248 210.814 128.655C218.681 128.791 226.48 128.045 234.347 128.384C251.844 132.046 269.951 131.164 287.312 135.505C292.737 137.675 298.095 140.387 302.096 144.863C303.724 146.491 305.623 148.254 305.623 150.764C302.435 184.876 306.979 219.463 299.926 253.371C299.044 255.541 297.824 257.712 295.857 259C291.788 261.984 286.634 262.933 282.09 265.036C269.476 265.85 256.726 265.578 244.112 265.917C193.114 264.29 142.047 264.154 91.1843 267.477C66.2276 266.663 41.203 266.324 16.314 263.679C14.4829 263.679 12.7197 262.798 11.3633 261.645C3.36088 242.046 4.31032 219.802 7.42991 199.185C5.87012 185.622 7.56555 171.787 6.88737 158.223C7.15864 158.223 7.3621 158.223 7.63337 158.223C7.63337 158.02 7.49774 157.884 7.49774 157.681C7.56555 154.833 8.31154 151.442 9.60007 148.729C9.66788 148.39 9.87134 148.051 10.007 147.644C10.2782 147.034 10.6851 146.288 11.1599 145.677C11.7024 144.863 12.3806 144.117 13.0588 143.507C14.0082 142.693 15.1611 142.286 16.4496 142.219C19.0945 141.405 21.875 140.862 24.5877 140.387C78.6381 134.216 132.96 127.502 187.417 127.977ZM186.468 122.416C132.01 122.009 77.7565 128.791 23.7061 134.826C19.5014 135.572 15.2289 136.318 11.3633 138.15C7.769 139.981 5.73448 143.846 5.19194 147.78C4.98849 147.644 4.71722 147.644 4.44596 147.576C4.31032 147.915 4.31031 148.119 4.17468 148.458C4.10686 148.661 3.36088 150.56 3.29306 150.696C3.15743 151.035 3.0896 151.238 3.02179 151.306C3.02179 151.306 3.02179 151.374 3.02179 151.442C3.02179 151.577 3.02179 151.781 2.95398 152.12C2.88616 153.408 2.81834 153.951 2.54707 154.765C2.41143 155.239 2.14016 155.714 1.86889 156.121C2.14016 161.614 1.32635 167.243 1.1229 172.736C4.31031 202.712 -5.86228 233.704 5.66667 262.73C6.20921 263.815 7.02301 264.764 7.90463 265.646C9.53225 267.002 11.499 268.02 13.5335 268.562C38.8293 271.614 64.2608 271.818 89.6245 272.767C140.148 269.647 190.808 269.376 241.4 271.207C254.76 271.072 268.12 270.936 281.548 270.529C290.364 267.613 301.689 264.968 304.877 254.863C312.269 223.125 307.386 190.572 310.913 158.563C310.98 155.104 311.184 151.577 310.573 148.186C309.692 144.05 306.165 141.269 303.385 138.353C297.417 133.47 290.296 130.147 282.768 128.452C266.696 126.417 250.487 125.535 234.482 122.687C226.209 122.348 217.935 123.094 209.593 122.891C201.998 122.687 194.199 122.484 186.468 122.416Z" fill="white"/>
              <path d="M272.054 143.508C276.53 143.508 277.276 150.561 272.935 151.511C265.611 152.189 258.287 150.019 251.03 149.544C184.908 150.629 118.041 142.762 52.4612 155.851C49.1381 156.597 45.6794 156.19 42.2886 156.394C39.4403 155.376 34.8287 154.088 34.2861 150.697C36.3885 148.527 39.7115 148.256 42.492 147.577C72.8064 143.78 103.256 141.745 133.842 143.101C172.701 140.728 211.696 143.644 250.556 143.441C255.642 143.915 260.728 144.526 265.882 144.933C271.036 145.407 275.919 147.442 280.599 149.612C281.073 151.036 279.039 151.986 278.361 152.867C274.495 158.36 271.172 148.052 276.733 146.967C282.769 147.442 279.921 153.071 276.123 154.698C271.376 153.613 267.985 149.341 272.189 145.068C276.258 145.136 279.581 148.052 282.905 150.019C283.04 150.494 282.769 150.833 282.498 151.24C278.496 158.564 274.02 150.019 268.731 150.29C268.799 148.391 269.273 146.221 270.29 144.593C272.732 144.119 277.344 145.339 278.022 148.052C276.869 152.392 273.953 153.749 270.019 151.918C268.731 151.85 267.51 151.782 266.221 151.714C259.304 153.274 259.033 141.677 265.95 143.034C266.9 143.101 267.917 143.101 268.866 143.237C275.377 142.491 283.99 147.917 281.413 155.037C274.563 155.512 263.237 152.189 263.305 143.915C271.24 140.118 282.905 143.78 286.228 152.325C281.819 163.243 270.562 152.46 264.729 148.798C269.544 139.304 289.008 147.103 280.599 157.411C275.445 156.597 268.053 152.189 268.392 146.492C275.106 141.474 291.314 151.036 279.853 157.208C275.106 158.293 270.697 153.545 265.679 153.545C260.525 153.071 255.303 152.528 250.149 151.986C211.154 152.189 172.023 149.205 133.028 151.579C102.307 149.883 71.7213 152.799 41.2035 155.783C38.7621 154.698 39.5759 150.358 40.8644 148.527C43.7806 147.374 47.1714 148.459 50.291 147.781C117.023 134.489 185.18 142.423 252.522 141.406C259.168 142.152 265.543 143.508 272.054 143.508Z" fill="white"/>
              <path d="M289.617 156.324C288.6 157.409 288.058 159.375 286.566 159.579C282.903 160.054 279.241 156.934 279.513 153.475C279.716 150.83 283.717 143.099 285.209 148.728C285.82 151.102 282.768 154.425 280.326 154.221C274.019 153.679 262.49 155.306 263.372 146.219C263.508 144.523 265.949 142.896 267.509 143.438C273.748 145.541 284.938 142.218 286.769 149.745C287.379 152.322 285.413 155.917 282.836 156.595C280.462 157.137 277.139 154.56 277.071 152.119C277.003 149.338 279.784 145.812 282.564 145.88C287.379 146.015 289.821 151.237 289.617 156.324Z" fill="white"/>
              <path d="M62.7692 161.001C70.0256 161.001 77.2821 161.679 83.1144 162.968C85.2845 163.442 86.7087 165.612 86.234 167.783C85.7593 169.953 83.5891 171.377 81.4189 170.902C71.4498 168.732 56.8012 168.664 45.747 170.427C45.747 171.241 45.6792 171.919 45.747 173.004C45.8148 174.157 45.8827 175.378 46.0183 176.938C46.0861 177.413 46.3574 179.922 46.3574 180.397C46.7643 185.619 46.8999 190.773 47.0356 198.504V198.707C48.5954 198.639 50.1552 198.572 51.9184 198.639C54.4276 198.775 57.3438 199.046 61.4128 199.453C69.0084 200.199 72.3314 200.403 76.3326 200.199C78.5706 200.064 80.4695 201.759 80.6051 203.997C80.7408 206.235 79.0453 208.202 76.8074 208.337C72.1958 208.609 68.6693 208.405 60.599 207.591C53.9529 206.913 50.6299 206.778 47.1034 206.845C47.1034 209.083 47.1712 211.457 47.1712 211.999C47.1712 217.018 47.239 219.256 47.3746 222.24C47.6459 227.801 48.2563 231.87 49.0701 233.837C49.5448 233.904 50.1552 234.04 51.1046 234.04C51.5793 234.04 51.9862 234.04 52.8678 234.04C54.7667 234.04 55.3771 234.04 56.2587 234.176C63.9899 235.261 81.1477 235.803 83.3857 234.718C85.4202 233.701 87.8616 234.515 88.811 236.549C89.8283 238.584 88.9467 241.025 86.98 241.975C84.2673 243.331 78.8419 243.602 70.7716 243.399C65.0072 243.195 58.2932 242.721 55.038 242.246C54.7667 242.178 54.292 242.178 52.9357 242.246C51.9862 242.246 51.5115 242.246 50.969 242.246C49.3413 242.246 48.0528 242.11 46.8321 241.771C44.8654 241.297 43.2378 240.279 42.2205 238.516C40.3895 235.329 39.5756 230.107 39.2366 222.715C39.1009 219.595 39.0331 217.221 39.0331 212.135C39.0331 210.779 38.8975 199.725 38.8975 198.707C38.8297 191.18 38.6262 186.161 38.2193 181.143C38.2193 180.803 37.948 178.294 37.8802 177.887C37.7446 176.26 37.6089 174.903 37.5411 173.615C37.3377 169.071 37.6089 165.884 39.0331 163.51C39.2366 163.103 39.5078 162.764 39.9825 162.357C40.7964 161.679 41.8136 161.34 42.8309 161.408C43.7125 161.476 44.5263 161.882 45.2723 162.561C50.7655 161.476 56.6656 160.933 62.7692 161.001ZM136.826 160.662C137.368 160.73 137.911 160.865 138.386 161.136C140.352 162.222 141.098 164.663 140.013 166.63C138.86 168.8 134.52 176.87 134.927 176.192C130.112 185.212 126.45 191.858 122.855 198.3C123.873 199.792 124.89 201.488 126.45 204.133C126.517 204.268 126.517 204.268 126.653 204.404C129.366 209.083 130.654 211.118 132.418 213.085C134.045 214.916 135.673 216.475 138.725 219.256C138.928 219.392 139.538 220.002 139.606 220.07C146.32 226.105 149.372 229.496 152.017 234.854C153.034 236.888 152.22 239.33 150.186 240.279C148.151 241.297 145.778 240.415 144.76 238.448C142.658 234.244 140.149 231.463 134.181 226.038C134.113 225.97 133.503 225.427 133.299 225.224C130.044 222.308 128.281 220.544 126.382 218.442C124.144 215.933 122.652 213.559 119.668 208.405C119.6 208.27 119.532 208.27 119.464 208.134C118.99 207.32 118.786 206.913 118.379 206.303C115.124 211.932 112.072 217.221 108.817 222.443C107.936 223.868 107.122 225.427 105.765 228.208C105.698 228.411 105.155 229.429 105.019 229.7C102.239 235.396 100.476 238.38 97.8307 241.093C96.2709 242.721 93.6939 242.721 92.0663 241.161C90.4387 239.601 90.4386 237.024 91.9984 235.464C93.8295 233.565 95.3215 231.124 97.6951 226.173C97.8307 225.902 98.3055 224.885 98.4411 224.681C99.9331 221.63 100.815 219.934 101.9 218.171C105.765 211.932 109.292 205.964 113.293 198.911C111.937 197.215 110.648 195.723 108.342 193.011C108.207 192.807 108.003 192.604 107.596 192.129C101.561 185.076 98.7124 181.549 95.525 176.667C95.1859 176.124 94.5755 175.582 93.2192 174.632C93.0835 174.496 93.0835 174.496 92.8801 174.429C90.0318 172.394 88.6754 171.106 87.726 168.596C86.9122 166.494 87.9294 164.188 90.0317 163.307C90.5743 163.103 91.1168 163.035 91.5915 163.035C93.1513 163.103 94.6433 164.053 95.2537 165.612C95.4571 166.155 95.9997 166.697 97.6273 167.85C97.7629 167.986 97.7629 167.918 97.8986 168.054C100.069 169.614 101.289 170.631 102.375 172.326C105.223 176.802 107.936 180.125 113.768 186.907C114.175 187.314 114.31 187.585 114.514 187.789C115.87 189.348 116.481 190.23 117.43 191.315C120.55 185.619 123.601 180.125 127.806 172.394C127.399 173.14 131.739 165.002 132.892 162.832C133.706 161.272 135.266 160.526 136.826 160.662ZM228.65 158.831C229.735 158.898 230.685 158.966 232.448 159.102C235.5 159.305 236.585 159.373 238.009 159.441C240.79 159.509 242.96 159.577 248.046 159.712C253.065 159.916 255.37 159.916 258.151 159.984C264.933 160.119 270.494 159.916 275.648 159.373C277.886 159.102 279.852 160.73 280.124 162.968C280.395 165.206 278.767 167.172 276.529 167.443C270.968 168.054 265.136 168.257 258.015 168.122C256.388 168.122 254.15 168.054 252.319 167.986C252.319 168.257 252.386 168.461 252.319 168.732C251.912 170.699 251.912 172.733 252.386 176.87C252.386 177.141 252.386 177.141 252.454 177.345C252.793 180.803 252.929 182.363 252.861 184.33C252.658 190.569 252.929 195.655 253.675 207.184C253.946 210.847 254.014 212.474 254.15 214.509C254.624 223.054 254.76 229.496 254.285 235.803C254.15 238.041 252.183 239.737 249.945 239.533C247.707 239.398 246.012 237.431 246.215 235.193C246.622 229.293 246.554 223.189 246.079 214.983C245.944 212.949 245.876 211.321 245.605 207.727C244.791 195.927 244.587 190.705 244.723 184.127C244.791 182.635 244.655 181.278 244.384 178.159C244.384 177.887 244.316 177.887 244.316 177.684C243.841 173.14 243.841 170.563 244.384 167.783C242.146 167.715 239.705 167.647 237.874 167.579C236.246 167.579 235.025 167.511 231.838 167.24C230.142 167.104 229.261 167.037 228.243 166.969C224.039 166.765 221.055 166.969 218.681 167.783C216.579 168.529 214.273 167.376 213.527 165.206C212.781 163.103 213.934 160.797 216.036 160.051C219.631 158.831 223.496 158.559 228.65 158.831ZM171.413 158.288C173.515 158.288 175.278 158.356 178.94 158.492C183.484 158.627 185.315 158.695 187.689 158.695C188.503 158.695 189.181 158.695 190.876 158.559C191.893 158.492 192.368 158.492 192.978 158.424C196.437 158.288 198.946 158.559 201.388 159.509C203.49 160.323 204.507 162.696 203.626 164.799C202.812 166.901 200.438 167.918 198.336 167.037C197.183 166.562 195.691 166.426 193.25 166.494C192.707 166.494 192.232 166.562 191.283 166.63C189.384 166.765 188.57 166.765 187.553 166.765C186.536 166.765 184.908 166.697 183.891 166.697C183.959 167.037 184.094 167.443 184.094 167.783C184.027 169.071 183.348 170.088 182.399 170.834C182.399 170.902 182.331 170.97 182.331 171.106C182.06 172.326 181.924 174.09 181.856 176.328C181.789 178.159 181.789 180.058 181.856 182.431C181.856 182.567 181.924 183.787 181.924 184.059C182.331 209.083 182.806 220.884 184.23 234.244C186.875 234.176 189.113 233.837 194.47 232.616C197.048 232.073 198.2 231.802 199.76 231.531C202.134 231.124 204.372 230.853 206.406 230.785C208.441 230.717 210.408 230.921 212.374 231.327C214.544 231.802 215.969 233.972 215.494 236.142C215.019 238.313 212.849 239.737 210.679 239.262C208.034 238.652 205.118 238.787 201.252 239.466C199.896 239.737 198.811 239.94 196.302 240.483C190.401 241.771 187.824 242.246 184.434 242.314C182.128 242.314 180.297 242.314 176.16 242.11C175.414 242.11 175.007 242.043 174.6 242.043C168.225 241.839 164.631 241.907 160.833 242.517C158.595 242.856 156.493 241.364 156.154 239.194C155.815 236.956 157.307 234.922 159.477 234.515C163.953 233.769 168.022 233.701 174.939 233.904C175.278 233.904 175.685 233.904 176.228 233.972C174.871 220.68 174.397 208.676 173.99 184.059C173.99 183.787 173.99 182.635 173.99 182.431C173.922 179.99 173.922 177.955 173.99 175.921C174.057 173.276 174.261 170.97 174.668 169.275C174.939 168.122 175.278 167.172 175.753 166.358C174.397 166.291 172.701 166.223 171.548 166.223C163.817 166.087 158.12 166.562 153.034 167.85C150.864 168.393 148.694 167.104 148.083 164.934C147.541 162.764 148.829 160.594 151 159.984C156.696 158.627 163.003 158.152 171.413 158.288ZM22.8926 157.678V251.537L285.617 253.436L289.008 154.423C288.872 154.287 288.737 154.219 288.669 154.016C288.397 153.609 288.194 153.202 287.991 152.727C287.923 152.591 287.923 152.456 287.787 152.252C287.38 152.049 286.838 151.845 286.295 151.574H28.9283C25.6053 151.642 22.8926 154.355 22.8926 157.678Z" fill="white"/>
              <path d="M22.2725 134.923C45.6719 77.8158 122.447 -35.0735 159.5 13.502C198.044 64.0319 262.951 98.4936 283.277 130.751" stroke="#F8F8F8" stroke-width="3"/>
              <circle cx="138.507" cy="14.5197" r="11.8322" fill="#F8F8F8"/>
            </svg>

          </div>
        </div>
      </div>

    </div>

    <!-- <myFooter /> -->
  </div>
</transition>
</template>

<script>
// import myFooter from '@/components/sections/footer.vue'

export default {
  data () {
    return {
      project: [],
      projectMore: [],
      show: false,
      showMore: true
    }
  },
  components: {
    // myFooter
  },
  methods: {
    getPost: function () {
      fetch(this.$store.state.linkAdmin + '/wp-json/wp/v2/posts/' + this.$route.params.id)
        .then((r) => r.json())
      // eslint-disable-next-line no-return-assign
        .then((res) => {
          this.project = res
          this.show = true
          fetch(this.$store.state.linkAdmin + '/wp-json/wp/v2/posts?categories=4&per_page=4&before=' + this.project.date)
            .then((r) => r.json())
            .then((res) => {
              this.projectMore = res
              if (this.projectMore.length) {
                this.showMore = true
              }
            // console.log(this.blogMore)
            })
        })
    }
  },
  mounted () {
    this.getPost()
  },
  watch: {
    $route (to, from) {
      this.getPost()
    }
  }

}
</script>
<style lang="scss" >
.prItem{
  &__firstImg{
    width:  100%;
    height: 100vh;
    object-fit: cover;
    object-position: center;
  }
}
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.5s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;

}
.prTo{
  transition: 0.5s cubic-bezier(.41,1.55,.52,.44);
  transform-origin: 140/311*100% 15/273*100%;
  transform: rotate(5deg);
  cursor: pointer;
  max-width: 40%;
  height: auto;
  &:hover{
    transform: rotate(-7deg);
  }
}
</style>
